<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Priors (Advanced) • dscore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Custom Priors (Advanced)">
<meta property="og:description" content="dscore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dscore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.9.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/scoring_GSED.html">Scoring GSED</a>
    </li>
    <li>
      <a href="../articles/using_DAZ.html">Understanding and using DAZ</a>
    </li>
    <li>
      <a href="../articles/custom_priors.html">Custom Priors (Advanced)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/d-score/dscore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Custom Priors (Advanced)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/d-score/dscore/blob/HEAD/vignettes/custom_priors.Rmd" class="external-link"><code>vignettes/custom_priors.Rmd</code></a></small>
      <div class="hidden name"><code>custom_priors.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>This vignette provides an overview of the default prior settings and
demonstrates how to customize the prior mean and standard deviation for
D-score calculations. This is an advanced topic that requires a basic
understanding of the D-score calculation process. If you are unfamiliar
with the D-score methodology, we recommend reviewing the introductory
vignettes before proceeding.</p>
</div>
<div class="section level2">
<h2 id="default-prior-mean-and-standard-deviation">Default Prior Mean and Standard Deviation<a class="anchor" aria-label="anchor" href="#default-prior-mean-and-standard-deviation"></a>
</h2>
<p>The default prior mean and standard deviation for the
<code><a href="../reference/dscore.html">dscore()</a></code> function are determined by the <code>key</code>
argument. This function searches for the corresponding
<code>base_population</code> field in the <code>builtin_keys</code> data
frame, which contains several columns including the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/d-score/dscore" class="external-link">dscore</a></span><span class="op">)</span></span>
<span><span class="va">builtin_keys</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"key"</span>, <span class="st">"base_population"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##         key       base_population</span></span>
<span><span class="co">## 1     dutch                 dutch</span></span>
<span><span class="co">## 2      gcdg                  gcdg</span></span>
<span><span class="co">## 3  gsed1912                  gcdg</span></span>
<span><span class="co">## 8     293_0                phase1</span></span>
<span><span class="co">## 10 gsed2212                phase1</span></span>
<span><span class="co">## 11 gsed2406 preliminary_standards</span></span></code></pre>
<p>For instance, for <code>key = gsed2406</code>, the
<code>base_population</code> is identified as
<code>"preliminary_standards"</code>. The <code><a href="../reference/get_mu.html">get_mu()</a></code> function
returns the prior mean for the specified <code>key</code> at different
ages:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_mu.html">get_mu</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">/</span><span class="fl">12</span>, key <span class="op">=</span> <span class="st">"gsed2406"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1]  9.731266 14.922704 19.282654 23.155214 26.707086 30.031809 33.187157</span></span>
<span><span class="co">##  [8] 36.211330 39.130903 41.965115 45.158164 47.235287 49.186179</span></span></code></pre>
<p>This code snippet returns the prior mean for ages ranging from 0 to
12 months. These mean values represent the median of the D-score
distribution for the specified <code>base_population</code> under the
current <code>key</code>.</p>
<p>If the standard deviation of the prior is not specified, the
<code><a href="../reference/dscore.html">dscore()</a></code> function defaults to a value of 5.0 across all
ages. In comparison, the age-specific standard deviation for the
<code>base_population</code> averages around 2.5 to 3.5. Therefore, a
standard deviation of 5.0 signifies a relatively broad prior
distribution, regardless of age.</p>
<p>It’s crucial to note that altering the <code>key</code> parameter
changes both the prior mean and standard deviation. Since these
parameters affect the D-score, comparisons should generally be made only
between D-scores calculated using the same key, prior mean, and standard
deviation.</p>
</div>
<div class="section level2">
<h2 id="setting-your-own-prior-mean-and-standard-deviation">Setting Your Own Prior Mean and Standard Deviation<a class="anchor" aria-label="anchor" href="#setting-your-own-prior-mean-and-standard-deviation"></a>
</h2>
<p>In certain situations, you may want to define your own prior mean and
standard deviation for the D-score calculations. This can be done by
setting the <code>prior_mean</code> and <code>prior_sd</code> arguments
in the <code><a href="../reference/dscore.html">dscore()</a></code> function. Below are a few examples that
demonstrate how to customize these priors.</p>
<div class="section level3">
<h3 id="example-1-custom-prior-mean">Example 1: Custom Prior Mean<a class="anchor" aria-label="anchor" href="#example-1-custom-prior-mean"></a>
</h3>
<p>In this example, we add a value of 5 to the default prior mean for
each child, which results in higher D-scores.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the custom prior mean by adding 5 to the default prior mean</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">milestones</span></span>
<span><span class="va">mymean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mu.html">get_mu</a></span><span class="op">(</span>t <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">age</span>, key <span class="op">=</span> <span class="st">"gsed2406"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Calculate default D-scores</span></span>
<span><span class="va">def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">def</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span></span>
<span><span class="co">## 2 0.6571 14 0.6429 29.06 2.518082 -2.716</span></span>
<span><span class="co">## 3 1.1800 19 0.9474 53.35 3.414966 -0.006</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span></span>
<span><span class="co">## 5 0.5503 11 0.8182 28.75 3.476988 -1.863</span></span>
<span><span class="co">## 6 0.7666 14 0.7857 34.21 3.088920 -2.377</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom prior, direct specification</span></span>
<span><span class="va">adj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">data</span>, prior_mean <span class="op">=</span> <span class="va">mymean</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adj1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 33.88 4.146874  0.310</span></span>
<span><span class="co">## 2 0.6571 14 0.6429 30.38 2.629683 -2.423</span></span>
<span><span class="co">## 3 1.1800 19 0.9474 55.93 3.774148  0.787</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 65.78 3.203216  0.438</span></span>
<span><span class="co">## 5 0.5503 11 0.8182 31.43 3.840857 -1.155</span></span>
<span><span class="co">## 6 0.7666 14 0.7857 36.30 3.395857 -1.867</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Custom prior, column specification</span></span>
<span><span class="va">adj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">mymean</span><span class="op">)</span>, prior_mean <span class="op">=</span> <span class="st">"mymean"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adj2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 33.88 4.146874  0.310</span></span>
<span><span class="co">## 2 0.6571 14 0.6429 30.38 2.629683 -2.423</span></span>
<span><span class="co">## 3 1.1800 19 0.9474 55.93 3.774148  0.787</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 65.78 3.203216  0.438</span></span>
<span><span class="co">## 5 0.5503 11 0.8182 31.43 3.840857 -1.155</span></span>
<span><span class="co">## 6 0.7666 14 0.7857 36.30 3.395857 -1.867</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">adj1</span>, <span class="va">adj2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>In this code, the <code>prior_mean</code> argument shows two forms.
The first form directly specifies the custom prior mean, while the
second form refers to an additional column in the data frame that
contains the user-specified prior means. Both specifications yield
identical results. In addition, the user can specify a scalar value for
the <code>prior_mean</code> argument, which will be applied to all
observations, but this option is unreasonable if ages vary across
observations.</p>
<p>The next snippet compares the adjusted and default D-scores as a
function of the proportion of items passed by the child.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the difference between adjusted and default D-scores</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">adj1</span><span class="op">$</span><span class="va">d</span> <span class="op">-</span> <span class="va">def</span><span class="op">$</span><span class="va">d</span>, x <span class="op">=</span> <span class="va">def</span><span class="op">$</span><span class="va">p</span>, </span>
<span>     xlab <span class="op">=</span> <span class="st">"Proportion of items passed by the child"</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"Upward drift of D-score"</span>, </span>
<span>     pch <span class="op">=</span> <span class="fl">16</span>, main <span class="op">=</span> <span class="st">"Impact of Custom Prior Mean on D-score"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a smoothed line to visualize the trend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lowess.html" class="external-link">lowess</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">def</span><span class="op">$</span><span class="va">p</span>, y <span class="op">=</span> <span class="va">adj1</span><span class="op">$</span><span class="va">d</span> <span class="op">-</span> <span class="va">def</span><span class="op">$</span><span class="va">d</span>, f <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"grey"</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_priors_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>The plot illustrates that the upward bias is more pronounced when
less informative items are administered, i.e., when the proportion of
items passed is either very low (not shown) or very high. The bias is
relatively mild (one D-score unit increase) when the child can perform
about half of the items.</p>
</div>
<div class="section level3">
<h3 id="example-2-setting-a-custom-prior-standard-deviation">Example 2: Setting a Custom Prior Standard Deviation<a class="anchor" aria-label="anchor" href="#example-2-setting-a-custom-prior-standard-deviation"></a>
</h3>
<p>In some situations, we may have strong prior beliefs about the
variability of the D-scores based on factors such as the trajectory of a
child’s D-score or expert knowledge. Incorporating this information can
lead to more robust or smooth results by better reflecting our
understanding of the variability.</p>
<p>The following code snippet demonstrates how to set a custom prior
standard deviation. Here, the <code>prior_sd</code> argument is
specified using a constant value or values derived from the data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter data for a specific child</span></span>
<span><span class="va">boy</span> <span class="op">&lt;-</span> <span class="va">milestones</span><span class="op">[</span><span class="va">milestones</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="fl">111</span>, <span class="op">]</span> </span>
<span></span>
<span><span class="co"># Calculate default D-scores</span></span>
<span><span class="va">def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">boy</span><span class="op">)</span></span>
<span><span class="va">def</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span></span>
<span><span class="co">## 2 0.6571 14 0.6429 29.06 2.518082 -2.716</span></span>
<span><span class="co">## 3 1.1800 19 0.9474 53.35 3.414966 -0.006</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span></span></code></pre>
<p>Suppose we want to inform the estimation process by the previous
observation. We can use the location of the last observation (in DAZ
units) and calculate an informative mean and standard deviation for the
next time point as follows:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate expected D-scores and standard deviations</span></span>
<span><span class="va">exp_d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/daz.html">zad</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">def</span><span class="op">$</span><span class="va">daz</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">def</span><span class="op">$</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">exp_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="va">def</span><span class="op">$</span><span class="va">sem</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate adjusted D-scores using the custom prior mean and standard deviation</span></span>
<span><span class="va">adj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">boy</span>, prior_mean <span class="op">=</span> <span class="va">exp_d</span>, prior_sd <span class="op">=</span> <span class="va">exp_sd</span><span class="op">)</span></span></code></pre></div>
<p>The code snippet below plots the raw and informed DAZ trajectories
for child 111:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plotting the raw and informed DAZ trajectories</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">def</span><span class="op">$</span><span class="va">a</span>, y <span class="op">=</span> <span class="va">def</span><span class="op">$</span><span class="va">daz</span>, type <span class="op">=</span> <span class="st">"b"</span>, pch <span class="op">=</span> <span class="fl">16</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"DAZ"</span>, xlab <span class="op">=</span> <span class="st">"Age (years)"</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Standard (black) and Informed (red) DAZ-trajectory for child 111"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">adj1</span><span class="op">$</span><span class="va">a</span>, y <span class="op">=</span> <span class="va">adj1</span><span class="op">$</span><span class="va">daz</span>, col <span class="op">=</span> <span class="st">"red"</span>, type <span class="op">=</span> <span class="st">"b"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, pch <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_priors_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<p>This plot illustrates the DAZ trajectory using standard estimates (in
black) and the adjusted estimates (in red) for child 111, highlighting
the impact of incorporating more informative prior knowledge into the
analysis.</p>
<p>Of course, the examples provided here are simplified and may not
fully capture the complexity of real-world scenarios. However, they
demonstrate how to customize the prior mean and standard deviation in
the <code><a href="../reference/dscore.html">dscore()</a></code> function to better reflect your prior
knowledge and improve the accuracy of the D-score estimates.</p>
</div>
<div class="section level3">
<h3 id="handling-missing-ages">Handling Missing Ages<a class="anchor" aria-label="anchor" href="#handling-missing-ages"></a>
</h3>
<p>By default, the D-score of observations with missing ages will be
<code>NA</code>. It is possible to force D-score calculation by setting
<code>prior_mean_NA</code> and <code>prior_sd_NA</code> to a specific
value. The documentation for the <code><a href="../reference/dscore.html">dscore()</a></code> function states
that <code>prior_mean_NA = 50</code> and <code>prior_sd_NA = 20</code>
as reasonable choices for samples between 0-3 years. If these defaults
are not suitable for your data, you can customize them to better reflect
your expectations.</p>
</div>
<div class="section level3">
<h3 id="example-3-customizing-prior-mean-and-standard-deviation-for-missing-ages">Example 3: Customizing Prior Mean and Standard Deviation for Missing
Ages<a class="anchor" aria-label="anchor" href="#example-3-customizing-prior-mean-and-standard-deviation-for-missing-ages"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set missing ages for specific observations</span></span>
<span><span class="va">boy</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># Calculate D-scores using default</span></span>
<span><span class="va">def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">boy</span><span class="op">)</span></span>
<span><span class="va">def</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span></span>
<span><span class="co">## 2     NA 14 0.6429    NA       NA     NA</span></span>
<span><span class="co">## 3     NA 19 0.9474    NA       NA     NA</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span></span></code></pre>
<p>This call to <code><a href="../reference/dscore.html">dscore()</a></code> produces a D-score of
<code>NA</code> when age data is missing, which effectively excludes
these cases from downstream analyses. This is the safest option, and the
default behavior.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate D-scores for missing ages using age-independent priors</span></span>
<span><span class="va">adj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">boy</span>, prior_mean_NA <span class="op">=</span> <span class="fl">50</span>, prior_sd_NA <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">adj1</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span></span>
<span><span class="co">## 2     NA 14 0.6429 26.51 2.693178     NA</span></span>
<span><span class="co">## 3     NA 19 0.9474 54.25 5.061741     NA</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span></span></code></pre>
<p>This call to <code><a href="../reference/dscore.html">dscore()</a></code> uses custom settings
<code>prior_mean_NA = 50</code> and <code>prior_sd_NA = 20</code>, which
are suggested age-independent values for children with missing ages
between 0 and 3 years.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Forcing D-scores for missing ages to value -1</span></span>
<span><span class="va">adj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dscore.html">dscore</a></span><span class="op">(</span><span class="va">boy</span>, prior_mean_NA <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, prior_sd_NA <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span></span>
<span><span class="va">adj2</span></span></code></pre></div>
<pre><code><span><span class="co">##        a  n      p     d      sem    daz</span></span>
<span><span class="co">## 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span></span>
<span><span class="co">## 2     NA 14 0.6429 -1.00 0.000000     NA</span></span>
<span><span class="co">## 3     NA 19 0.9474 -1.00 0.000000     NA</span></span>
<span><span class="co">## 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span></span></code></pre>
<p>This call sets a custom prior mean and standard deviation
<code>prior_mean_NA = -1</code> and <code>prior_sd_NA = 0.001</code>,
effectively resulting in a constant value for the D-score (note that
<code>prior_sd_NA = 0</code> produces missing values).</p>
<p>Note that the <code>prior_mean_NA</code> and <code>prior_sd_NA</code>
arguments are ignored when <code>prior_mean</code> and
<code>prior_sd</code> are set per observation (either by direct or
column specification). Those options allow for full control over the
handling of missing ages on a case-by-case basis.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Stef van Buuren, Iris Eekhout, Arjan Huizing, Jonathan Seiden.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
