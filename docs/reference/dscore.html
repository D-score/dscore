<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>D-score estimation — dscore • dscore</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="D-score estimation — dscore"><meta property="og:description" content="The dscore() function estimates the following quantities: D-score,
a numeric score that quantifies child development by one number,
Development-for-Age Z-score (DAZ) that corrects the D-score for age,
standard error of measurement (SEM) of the D-score."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dscore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.9.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/custom_priors.html">Custom Priors (Advanced)</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/scoring_GSED.html">Scoring GSED</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/d-score/dscore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>D-score estimation</h1>
    <small class="dont-index">Source: <a href="https://github.com/d-score/dscore/blob/HEAD/R/dscore.R" class="external-link"><code>R/dscore.R</code></a></small>
    <div class="hidden name"><code>dscore.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>dscore()</code> function estimates the following quantities: <em>D-score</em>,
a numeric score that quantifies child development by one number,
<em>Development-for-Age Z-score (DAZ)</em> that corrects the D-score for age,
<em>standard error of measurement (SEM)</em> of the D-score.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dscore</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  items <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  population <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xname <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  xunit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"decimal"</span>, <span class="st">"days"</span>, <span class="st">"months"</span><span class="op">)</span>,</span>
<span>  prepend <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  itembank <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dscore"</span>, <span class="st">"logit"</span><span class="op">)</span>,</span>
<span>  prior_mean <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_mean_NA <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_sd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_sd_NA <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span>,</span>
<span>  relevance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"current"</span>, <span class="st">"1.8.7"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dscore_posterior</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  items <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  population <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xname <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  xunit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"decimal"</span>, <span class="st">"days"</span>, <span class="st">"months"</span><span class="op">)</span>,</span>
<span>  prepend <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  itembank <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dscore"</span>, <span class="st">"logit"</span><span class="op">)</span>,</span>
<span>  prior_mean <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_mean_NA <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_sd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_sd_NA <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span>,</span>
<span>  relevance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"current"</span>, <span class="st">"1.8.7"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A <code>data.frame</code> with the data.
A row collects all observations made on a child on a set of
milestones administered at a given age. The function calculates
a D-score for each row. Different rows can correspond to different
children or ages.</p></dd>


<dt>items</dt>
<dd><p>A character vector containing names of items to be
included into the D-score calculation. Milestone scores are coded
numerically as <code>1</code> (pass) and <code>0</code> (fail). By default,
D-score calculation is done on all items found in the data
that have a difficulty parameter under the specified <code>key</code>.</p></dd>


<dt>key</dt>
<dd><p>String. They key identifies 1) the difficulty estimates
pertaining to a particular Rasch model, and 2) the prior mean and standard
deviation of the prior distribution for calculating the D-score.
The default key <code>NULL</code> sets <code>key = "gsed2406"</code>.
View <code>builtin_keys</code> for an overview of the available keys.</p></dd>


<dt>population</dt>
<dd><p>String. The name of the reference population to calculate
DAZ.
Use <code>with(builtin_references, table(key, population))</code> to see which
built-in references are available for <code>key - population</code> combinations.
If not specified, the function set the default population as
<code>builtin_keys$base_population[key == builtin_keys$key]</code>.</p></dd>


<dt>xname</dt>
<dd><p>A string with the name of the age variable in
<code>data</code>. The default is <code>"age"</code>. Do not round age.</p></dd>


<dt>xunit</dt>
<dd><p>A string specifying the unit in which age is measured
(either <code>"decimal"</code>, <code>"days"</code> or <code>"months"</code>).
The default <code>"decimal"</code> corresponds to decimal age in years.</p></dd>


<dt>prepend</dt>
<dd><p>Character vector with column names in <code>data</code> that will
be prepended to the returned data frame. This is useful for copying
columns from data into the result, e.g., for matching.</p></dd>


<dt>itembank</dt>
<dd><p>A <code>data.frame</code> with at least three columns named
<code>key</code>, <code>item</code> and <code>tau</code>. By default, the function uses
<code><a href="builtin_itembank.html">dscore::builtin_itembank</a></code>. If you specify your own <code>itembank</code>,
then you should also provide the relevant <code>transform</code> and <code>qp</code> arguments.</p></dd>


<dt>metric</dt>
<dd><p>A string, either <code>"dscore"</code> (default) or
<code>"logit"</code>, signalling the metric in which ability is estimated.
<code>daz</code> is not calculated for the logit scale.</p></dd>


<dt>prior_mean</dt>
<dd><p><code>NULL</code> (default), a string, a numeric scalar, or
a numeric vector with  <code>nrow(data)</code> elements. The default value
<code>NULL</code> will consult the <code>base_population</code> field in <code>builtin_keys</code>,
and use the corresponding median of that reference as prior mean for
the D-score. The string should refer to a column name in <code>data</code>
that contains user-supplied values of the prior mean for each observation.
A numeric scalar will be expanded to all observations. A numeric vector
will be used as is.</p></dd>


<dt>prior_mean_NA</dt>
<dd><p><code>NULL</code> (default) or a scalar numeric, representing
the prior mean for observations with missing ages. By default, D-scores
with missing ages will we <code>NA</code>. We suggest setting
<code>prior_mean_NA = 50</code> as a reasonable choice for samples between 0-3
years. The argument is ignored if <code>prior_mean</code> is specified per
observation, which gives you full control of priors for observations
with missing ages.</p></dd>


<dt>prior_sd</dt>
<dd><p><code>NULL</code> (default), a string, a numeric scalar, or
a numeric vector with <code>nrow(data)</code> elements. The default (<code>NULL</code>)
uses a value of 5 for all ages. The string should refer to a column
name in <code>data</code> that contains user-supplied values of the prior sd
for each observation. A numeric scalar will be expanded to all
observations. A numeric vector will be used as is.</p></dd>


<dt>prior_sd_NA</dt>
<dd><p><code>NULL</code> (default) or a scalar numeric, representing
the prior sd for observations with missing ages. By default, D-scores
with missing ages will we <code>NA</code>. We suggest setting
<code>prior_sd_NA = 20</code> as a reasonable choice for samples between 0-3
years. The argument is ignored if <code>prior_sd</code> is specified per
observation, which gives you full control of priors for observations
with missing ages.</p></dd>


<dt>transform</dt>
<dd><p>Numeric vector, length 2, containing the intercept
and slope of the linear transform from the logit scale into the
the D-score scale. The default (<code>NULL</code>) searches <code>builtin_keys</code>
for intercept and slope values.</p></dd>


<dt>qp</dt>
<dd><p>Numeric vector of equally spaced quadrature points.
This vector should span the range of all D-score or logit values.
The default (<code>NULL</code>) creates <code>seq(from, to, by)</code> searching the
arguments from <code>builtin_keys</code>.</p></dd>


<dt>dec</dt>
<dd><p>A vector of two integers specifying the number of
decimals for rounding the D-score and DAZ, respectively.
The default is <code>dec = c(2L, 3L)</code>.</p></dd>


<dt>relevance</dt>
<dd><p>A numeric vector of length with the lower and
upper bounds of the relevance interval. The procedure calculates
a dynamic EAP for each item. If the difficulty level (tau) of the
next item is outside the relevance interval around EAP, the procedure
ignore the score on the item. The default is <code>c(-Inf, +Inf)</code> does not
ignore scores.</p></dd>


<dt>algorithm</dt>
<dd><p>Computational method, for backward compatibility.
Either <code>"current"</code> (default) or <code>"1.8.7"</code> (deprecated).</p></dd>


<dt>verbose</dt>
<dd><p>Logical. Print settings.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The <code>dscore()</code> function returns a <code>data.frame</code> with <code>nrow(data)</code> rows.
Optionally, the first block of columns can be copied to the
result by using <code>prepend</code>. The second block consists of the
following columns:</p><table class="table table"><tr><td>Name</td><td>Label</td></tr><tr><td><code>a</code></td><td>Decimal age (years)</td></tr><tr><td><code>n</code></td><td>Number of items with valid (0/1) data</td></tr><tr><td><code>p</code></td><td>Percentage of passed milestones</td></tr><tr><td><code>d</code></td><td>D-score, mean of posterior distribution</td></tr><tr><td><code>sem</code></td><td>Standard error of measurement, standard deviation of the posterior</td></tr><tr><td><code>daz</code></td><td>D-score corrected for age, calculated in Z-scale (for metric <code>"dscore"</code>)</td></tr></table><p>For more detail, the <code>dscore_posterior()</code> function returns a data frame with
<code>nrow(data)</code> rows and <code>length(qp)</code> plus prepended columns with the
full posterior density of the D-score at each quadrature point.
If no valid responses are found, <code>dscore_posterior()</code> returns the
prior density. Versions prior to 1.8.5 returned a <code>matrix</code> (instead of
a <code>data.frame</code>). Code that depends on the result being a <code>matrix</code> may break
and may need adaptation.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The scoring algorithm is based on the method by Bock and Mislevy (1982).
The method uses Bayes rule to update a prior ability into a posterior
ability.</p>
<p>The item names should correspond to the <code>"gsed"</code> lexicon.</p>
<p>A key is defined by the set of estimated item difficulties.</p><table class="table table"><tr><td>Key</td><td>Model</td><td>Quadrature</td><td>Instruments</td><td>Direct/Caregiver</td><td>Reference</td></tr><tr><td><code>"dutch"</code></td><td><code>75_0</code></td><td><code>-10:80</code></td><td>1</td><td>direct</td><td>Van Buuren, 2014/2020</td></tr><tr><td><code>"gcdg"</code></td><td><code>565_18</code></td><td><code>-10:100</code></td><td>13</td><td>direct</td><td>Weber, 2019</td></tr><tr><td><code>"gsed1912"</code></td><td><code>807_17</code></td><td><code>-10:100</code></td><td>21</td><td>mixed</td><td>GSED Team, 2019</td></tr><tr><td><code>"293_0"</code></td><td><code>293_0</code></td><td><code>-10:100</code></td><td>2</td><td>mixed</td><td>GSED Team, 2022</td></tr><tr><td><code>"gsed2212"</code></td><td><code>818_6</code></td><td><code>-10:100</code></td><td>27</td><td>mixed</td><td>GSED Team, 2022</td></tr><tr><td><code>"gsed2406"</code></td><td><code>818_6</code></td><td><code>-10:100</code></td><td>27</td><td>mixed</td><td>GSED Team, 2024</td></tr></table><p>As a general rule, one should only compare D-scores
that are calculated using the same key and the same
set of quadrature points. For calculating D-scores on new data,
the advice is to use the default, which currently is <code>"gsed2406"</code>.</p>
<p>The default starting prior is a mean calculated from a so-called
"Count model" that describes mean D-score as a function of age. The
The Count models are implemented in the function <code>[get_mu()]</code>.
By default, the spread of the starting prior
is 5 D-score points around the mean D-score, which corresponds to
approximately 1.5 to 2 times the normal spread of child of a given age. The
starting prior is informative for very short test (say &lt;5 items), but has
little impact on the posterior for larger tests.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Bock DD, Mislevy RJ (1982).
Adaptive EAP Estimation of Ability in a Microcomputer Environment.
Applied Psychological Measurement, 6(4), 431-444.</p>
<p>Van Buuren S (2014). Growth charts of human development.
Stat Methods Med Res, 23(4), 346-368.
<a href="https://stefvanbuuren.name/publication/van-buuren-2014-gc/" class="external-link">https://stefvanbuuren.name/publication/van-buuren-2014-gc/</a></p>
<p>Weber AM, Rubio-Codina M, Walker SP, van Buuren S, Eekhout I,
Grantham-McGregor S, Caridad Araujo M, Chang SM, Fernald LCH,
Hamadani JD, Hanlon A, Karam SM, Lozoff B, Ratsifandrihamanana L,
Richter L, Black MM (2019). The D-score: a metric for interpreting
the early development of infants and toddlers across global settings.
BMJ Global Health, BMJ Global Health 4: e001724.
<a href="https://gh.bmj.com/content/bmjgh/4/6/e001724.full.pdf" class="external-link">https://gh.bmj.com/content/bmjgh/4/6/e001724.full.pdf</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="builtin_keys.html">builtin_keys()</a></code>, <code><a href="builtin_itembank.html">builtin_itembank()</a></code>, <code><a href="builtin_itemtable.html">builtin_itemtable()</a></code>,
<code><a href="builtin_references.html">builtin_references()</a></code>, <code><a href="get_tau.html">get_tau()</a></code>, <code><a href="posterior.html">posterior()</a></code>, <code><a href="milestones.html">milestones()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Stef van Buuren, Iris Eekhout, Arjan Huizing (2022)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># using all defaults and properly formatted data</span></span></span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">dscore</span><span class="op">(</span><span class="va">milestones</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        a  n      p     d      sem    daz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.4873 11 0.9091 30.76 3.751319 -0.633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.6571 14 0.6429 29.06 2.518082 -2.716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1.1800 19 0.9474 53.35 3.414966 -0.006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1.9055 13 0.8462 63.88 2.971594 -0.094</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.5503 11 0.8182 28.75 3.476988 -1.863</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.7666 14 0.7857 34.21 3.088920 -2.377</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># step-by-step example</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Jane"</span>, <span class="st">"Martin"</span>, <span class="st">"ID-3"</span>, <span class="st">"No. 4"</span>, <span class="st">"Five"</span>, <span class="st">"6"</span>,</span></span>
<span class="r-in"><span>    <span class="cn">NA_character_</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">8</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">21</span> <span class="op">/</span> <span class="fl">365.25</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ddifmd001 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ddicmm029 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ddigmd053 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">items</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># third item is not part of the default key</span></span></span>
<span class="r-in"><span><span class="fu"><a href="get_tau.html">get_tau</a></span><span class="op">(</span><span class="va">items</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> key:         gsed2406 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ddifmd001 ddicmm029 ddigmd053 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      8.61      8.47        NA </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate D-score</span></span></span>
<span class="r-in"><span><span class="fu">dscore</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         a n   p     d      sem    daz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      NA 0  NA    NA       NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      NA 0  NA    NA       NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.0575 1 0.0  9.95 4.386250 -1.336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.0575 2 0.0  7.76 3.921677 -1.941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.0575 2 1.0 15.73 4.250471  0.610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.0575 2 1.0 15.73 4.250471  0.610</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># prepend id variable to output</span></span></span>
<span class="r-in"><span><span class="fu">dscore</span><span class="op">(</span><span class="va">data</span>, prepend <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id      a n   p     d      sem    daz</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Jane     NA 0  NA    NA       NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Martin     NA 0  NA    NA       NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    ID-3 0.0575 1 0.0  9.95 4.386250 -1.336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   No. 4 0.0575 2 0.0  7.76 3.921677 -1.941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    Five 0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       6 0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    &lt;NA&gt; 0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       8 0.0575 2 0.5 11.58 3.988388 -0.833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       9 0.0575 2 1.0 15.73 4.250471  0.610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     10 0.0575 2 1.0 15.73 4.250471  0.610</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or prepend all data</span></span></span>
<span class="r-in"><span><span class="co"># dscore(data, prepend = colnames(data))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate full posterior</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">dscore_posterior</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check that rows sum to 1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.9999992 0.9999992 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] 1.0000000 1.0000000 1.0000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot full posterior for measurement 7</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">p</span><span class="op">[</span><span class="fl">7</span>, <span class="fl">12</span><span class="op">:</span><span class="fl">36</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  names <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">25</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"D-score"</span>, ylab <span class="op">=</span> <span class="st">"Density"</span>, col <span class="op">=</span> <span class="st">"grey"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"Full D-score posterior for measurement in row 7"</span>,</span></span>
<span class="r-in"><span>  sub <span class="op">=</span> <span class="st">"D-score (EAP) = 11.58, SEM = 3.99"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dscore-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot P10, P50 and P90 of D-score references</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">4</span>, <span class="fl">0.1</span><span class="op">)</span>, p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="daz.html">zad</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="va">g</span><span class="op">$</span><span class="va">p</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">g</span><span class="op">$</span><span class="va">age</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> key:         gsed2406 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> population:  preliminary_standards </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/matplot.html" class="external-link">matplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">g</span><span class="op">$</span><span class="va">age</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">d</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"l"</span>,</span></span>
<span class="r-in"><span>  lty <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"blue"</span>, xlab <span class="op">=</span> <span class="st">"Age (years)"</span>, ylab <span class="op">=</span> <span class="st">"D-score"</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">"D-score preliminary standards: P10, P50 and P90"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">80</span>, <span class="fl">10</span><span class="op">)</span>, v <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">0.5</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"gray"</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add measurements made on very preterms, ga &lt; 32 weeks</span></span></span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">dscore</span><span class="op">(</span><span class="va">milestones</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ds</span><span class="op">$</span><span class="va">a</span>, y <span class="op">=</span> <span class="va">ds</span><span class="op">$</span><span class="va">d</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dscore-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Stef van Buuren, Iris Eekhout, Arjan Huizing.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

